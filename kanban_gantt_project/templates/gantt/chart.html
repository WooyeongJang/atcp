{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="{% static 'kanban/css/styles.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* 전체 화면 적용 */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
        }
    </style>
    <title>Gantt Chart</title>
</head>
<body>
    <div class="gantt-container">
        <h2>Gantt Chart</h2>
        <table>
            <!-- 헤더 -->
            <tr>
                <th>담당자</th>
                <th>활동명</th>
                <th>기간(월)</th>

                <!-- 연도별 헤더 -->
                {% for year in years %}
                    <th colspan="12">{{ year }}</th>
                {% endfor %}

            </tr>
            <!-- 데이터 -->
            {% for task in tasks %}
            <tr data-task-id="{{ task.id }}">
                <td class="editable" data-field="assigned_to" data-value="{{ task.assigned_to }}">{{ task.assigned_to }}</td>
                <td class="editable" data-field="title" data-value="{{ task.title }}">{{ task.title }}</td>
                <td class="editable" data-field="duration_months" data-value="{{ task.duration_months }}">{{ task.duration_months }}개월</td>
                <td colspan="{{ total_months }}" style="text-align: left; position: relative;">
                    <div
                        class="gantt-bar"
                        style="width: calc({{ task.duration_months }} * 50px); margin-left: calc({{ task.start_offset }} * 50px);">
                        {{ task.duration_months }}개월
                    </div>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>

    <!-- JS 파일 연결 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
